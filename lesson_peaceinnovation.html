<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Peace Innovation - Lesson 2: Peace by Design | Juan José Vásquez-Pacheco</title>
  <meta name="description" content="Lesson 2: Peace by Design - Design thinking, participatory design, and innovation for sustainable peacebuilding." />
  <link rel="canonical" href="https://juapache.github.io/lesson_peaceinnovation.html" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&family=Source+Serif+4:wght@500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <div class="container nav-bar">
      <nav>
        <ul>
          <li><a href="index.html">Home</a></li>
          <li><a href="about.html">About</a></li>
          <li><a href="research.html">Research</a></li>
          <li><a href="teaching.html">Teaching</a></li>
          <li><a href="contact.html">Contact</a></li>
          <li><a href="data-lab.html">Data Lab</a></li>
          <li><a href="blog.html">Blog</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <a class="skip-link" href="#main-content">Skip to content</a>
  <main id="main-content" tabindex="-1">
    <section id="lesson-page" aria-labelledby="session-title">
      <div class="container course-wrapper">
      <header class="course-header">
        <div class="header-title">
          <a href="index.html" class="home-btn" title="Back to home">←</a>
          <div class="title-group">
            <h1 id="session-title">Peace Innovation — Lesson 2: Peace by Design</h1>
            <p class="subtitle-tagline">Prerequisite: <a href="lesson_peaceinnovation-l1.html" style="color: inherit; text-decoration: underline;">Lesson 1: Intro to Peace Innovation</a></p>
          </div>
        </div>
      </header>
      <p class="lesson-intro">In this lesson, we explore design thinking, participatory approaches, and practical frameworks for creating innovative solutions to peace challenges. We move from understanding the landscape (Lesson 1) to designing and prototyping solutions that are conflict-sensitive, sustainable, and community-led.</p>

      <div class="progress-block" role="group" aria-label="Session progress">
        <div class="progress-meta">
          <span id="progress-text" aria-live="polite">0 / 5 sections completed</span>
        </div>
        <div class="progress-bar" role="progressbar" aria-valuemin="0" aria-valuemax="5" aria-valuenow="0"><span class="progress-fill" style="width:0%"></span></div>
      </div>

      <nav class="module-nav" aria-label="Session modules">
        <button class="module-link" data-target="#m1" aria-controls="m1" aria-current="true">1. Design Thinking</button>
        <button class="module-link" data-target="#m2" aria-controls="m2">2. Participatory Design</button>
        <button class="module-link" data-target="#m3" aria-controls="m3">3. Impact & Sustainability</button>
        <button class="module-link" data-target="#m4" aria-controls="m4">4. Conflict Transformation</button>
        <button class="module-link" data-target="#m5" aria-controls="m5">5. Communication & Ethics</button>
      </nav>

      <article class="lesson-content" aria-label="Interactive content">

        <!-- 1. Design Thinking for Peace Innovation -->
        <section id="m1" class="module-section" aria-labelledby="m1-title">
          <h2 id="m1-title">1. Design Thinking for Peace Innovation</h2>
          <p class="lead">A human-centered, iterative approach to solving complex peace challenges.</p>

          <details class="concept concept-alt-0" open>
            <summary><strong>Principles and Methodologies of Design Thinking</strong></summary>
            <p>Design thinking is a problem-solving approach emphasizing empathy, ideation, prototyping, and iteration. It centers the needs and perspectives of those most affected by a challenge, treating them as co-designers rather than passive recipients of solutions.</p>
          </details>

          <details class="concept concept-alt-1">
            <summary><strong>Applying Design Thinking to Peace Challenges</strong></summary>
            <p>Design thinking can address complex peace challenges: conflict resolution mechanisms, post-conflict reconstruction, social justice initiatives, and community healing. By iterating quickly with affected communities, innovators learn what works in specific contexts rather than importing standardized solutions.</p>
          </details>

          <details class="concept concept-alt-0">
            <summary><strong>Successful Examples of Design Thinking for Peace</strong></summary>
            <p>Case studies demonstrate how design thinking processes create sustainable peacebuilding outcomes. From dialogue platforms to economic initiatives to reconciliation programs, communities leading design processes generate solutions with deeper legitimacy and local ownership.</p>
          </details>

          <div class="resources-block">
            <h3>Additional Resources & Materials</h3>
            <p>Video lectures and materials coming soon. Placeholder for embedded videos and downloadable materials.</p>
            <div class="resource-placeholder">
              <p>Video 1 placeholder</p>
            </div>
            <div class="resource-placeholder">
              <p>Video 2 placeholder</p>
            </div>
          </div>

          <div class="notes-block">
            <label for="notes-m1" class="notes-label">Reflection — How might design thinking help you approach a peace challenge differently?</label>
            <textarea id="notes-m1" class="notes" rows="4" placeholder="Your notes (autosaved)"></textarea>
          </div>

          <div class="module-actions module-actions-centered">
            <button class="button-primary" data-complete="m1">Mark section complete</button>
            <div class="pager pager-right">
              <button class="button-quiet" data-next="#m2">Next →</button>
            </div>
          </div>
        </section>

        <!-- 2. Participatory Design and Co-creation -->
        <section id="m2" class="module-section" aria-labelledby="m2-title" hidden>
          <h2 id="m2-title">2. Participatory Design and Co-creation</h2>
          <p class="lead">Community leadership in designing peace solutions ensures legitimacy and sustainability.</p>

          <details class="concept concept-alt-0" open>
            <summary><strong>Participatory Design Methodologies</strong></summary>
            <p>Participatory design involves stakeholders and communities affected by conflict in all stages of the design process—from problem definition through prototyping and testing. This approach honors local knowledge, builds capacity, and creates solutions rooted in community priorities.</p>
          </details>

          <details class="concept concept-alt-1">
            <summary><strong>Empowering Local Communities</strong></summary>
            <p>True participation means communities have decision-making power, not just input. Empowered communities own peacebuilding initiatives, make choices aligned with their values, and drive sustainability. This contrasts with tokenistic participation where communities are consulted but decisions are made by outsiders.</p>
          </details>

          <details class="concept concept-alt-0">
            <summary><strong>Case Studies in Participatory Design</strong></summary>
            <p>Examples from inclusive governance structures, community development initiatives, and reconciliation processes show how participatory design creates stronger outcomes. Communities address governance through co-designed institutions, develop livelihoods that reflect local priorities, and design reconciliation processes that heal trauma while building justice.</p>
          </details>

          <div class="resources-block">
            <h3>Additional Resources & Materials</h3>
            <p>Video lectures and materials coming soon. Placeholder for embedded videos and downloadable materials.</p>
            <div class="resource-placeholder">
              <p>Video 1 placeholder</p>
            </div>
            <div class="resource-placeholder">
              <p>Video 2 placeholder</p>
            </div>
          </div>

          <div class="quiz-block" aria-labelledby="quiz-title-m2">
            <h3 id="quiz-title-m2">Quick Check</h3>
            <form id="quiz-m2" class="quiz" aria-describedby="quiz-desc-m2">
              <p id="quiz-desc-m2" class="muted">3 questions to reinforce core concepts.</p>

              <fieldset>
                <legend>1) Participatory design differs from traditional design by…</legend>
                <label><input type="radio" name="q1m2" value="a"> focusing on cost reduction</label>
                <label><input type="radio" name="q1m2" value="b"> involving affected communities in decision-making, not just consultation</label>
                <label><input type="radio" name="q1m2" value="c"> prioritizing speed over quality</label>
              </fieldset>

              <fieldset>
                <legend>2) Co-creation with affected communities ensures…</legend>
                <label><input type="radio" name="q2m2" value="a"> external control of outcomes</label>
                <label><input type="radio" name="q2m2" value="b"> ownership, legitimacy, and sustainability of solutions</label>
                <label><input type="radio" name="q2m2" value="c"> faster implementation</label>
              </fieldset>

              <fieldset>
                <legend>3) Empowering local ownership leads to…</legend>
                <label><input type="radio" name="q3m2" value="a"> dependency on external support</label>
                <label><input type="radio" name="q3m2" value="b"> reduced local capacity</label>
                <label><input type="radio" name="q3m2" value="c"> sustainable peacebuilding driven by community agency</label>
              </fieldset>

              <div class="quiz-actions">
                <button type="button" id="check-quiz-m2" class="button-primary">Check answers</button>
                <button type="button" id="try-quiz-m2" class="button-secondary">Try again</button>
                <span id="quiz-result-m2" role="status" aria-live="polite"></span>
              </div>
            </form>
          </div>

          <div class="notes-block">
            <label for="notes-m2" class="notes-label">Reflection — How can you ensure genuine participation rather than tokenism in your peace work?</label>
            <textarea id="notes-m2" class="notes" rows="4" placeholder="Your notes (autosaved)"></textarea>
          </div>

          <div class="module-actions module-actions-centered">
            <button class="button-quiet" data-prev="#m1">← Previous</button>
            <button class="button-primary" data-complete="m2">Mark section complete</button>
            <div class="pager pager-right">
              <button class="button-quiet" data-next="#m3">Next →</button>
            </div>
          </div>
        </section>

        <!-- 3. Designing for Social Impact and Sustainability -->
        <section id="m3" class="module-section" aria-labelledby="m3-title" hidden>
          <h2 id="m3-title">3. Designing for Social Impact and Sustainability</h2>
          <p class="lead">Creating peace innovations that address multiple dimensions and endure over time.</p>

          <details class="concept concept-alt-0" open>
            <summary><strong>Design for Social Impact in Peacebuilding</strong></summary>
            <p>Social impact design focuses on creating sustained positive change. In peacebuilding, this means innovations that reduce violence, build relationships, strengthen institutions, and enable human flourishing. Impact thinking requires understanding how change happens and measuring progress toward peace outcomes.</p>
          </details>

          <details class="concept concept-alt-1">
            <summary><strong>Addressing Environmental, Economic, and Social Dimensions</strong></summary>
            <p>Sustainable peace requires addressing multiple dimensions simultaneously. Environmental degradation and resource scarcity fuel conflict; economic inequality creates grievances; social exclusion prevents healing. Effective peace innovations integrate environmental sustainability, economic justice, and inclusive social systems.</p>
          </details>

          <details class="concept concept-alt-0">
            <summary><strong>Long-term Sustainability and Inclusivity</strong></summary>
            <p>Innovations that fade when external funding ends have limited impact. Sustainable designs build local capacity, integrate with existing systems, create revenue streams where possible, and ensure inclusion of marginalized voices. Sustainability thinking starts in the design phase, not as an afterthought.</p>
          </details>

          <div class="resources-block">
            <h3>Additional Resources & Materials</h3>
            <p>Video lectures and materials coming soon. Placeholder for embedded videos and downloadable materials.</p>
            <div class="resource-placeholder">
              <p>Video 1 placeholder</p>
            </div>
            <div class="resource-placeholder">
              <p>Video 2 placeholder</p>
            </div>
          </div>

          <div class="notes-block">
            <label for="notes-m3" class="notes-label">Reflection — What does sustainable peace look like in a context you care about?</label>
            <textarea id="notes-m3" class="notes" rows="4" placeholder="Your notes (autosaved)"></textarea>
          </div>

          <div class="module-actions module-actions-centered">
            <button class="button-quiet" data-prev="#m2">← Previous</button>
            <button class="button-primary" data-complete="m3">Mark section complete</button>
            <div class="pager pager-right">
              <button class="button-quiet" data-next="#m4">Next →</button>
            </div>
          </div>
        </section>

        <!-- 4. Designing for Conflict Transformation and Reconciliation -->
        <section id="m4" class="module-section" aria-labelledby="m4-title" hidden>
          <h2 id="m4-title">4. Designing for Conflict Transformation and Reconciliation</h2>
          <p class="lead">Using design to support healing, dialogue, and restoration of relationships.</p>

          <details class="concept concept-alt-0" open>
            <summary><strong>Design for Healing and Dialogue</strong></summary>
            <p>Design can intentionally create spaces and processes for healing individual and collective trauma. Dialogue processes, truth-telling ceremonies, and restorative justice mechanisms can be designed with attention to trauma-informed practice, cultural appropriateness, and psychological safety.</p>
          </details>

          <details class="concept concept-alt-1">
            <summary><strong>Bridging Divides Through Design</strong></summary>
            <p>Projects that bridge historical divides—from joint cultural events to economic ventures to joint problem-solving initiatives—require thoughtful design. These initiatives must create genuine contact across divides, challenge stereotypes, and build relationships while being sensitive to power imbalances and ongoing grievances.</p>
          </details>

          <details class="concept concept-alt-0">
            <summary><strong>Memorialization and Cultural Heritage</strong></summary>
            <p>Public spaces, memorials, and cultural heritage preservation can support peacebuilding. Thoughtfully designed memorials honor victims while pointing toward reconciliation. Public spaces redesigned with input from all communities can symbolize shared ownership and renewed coexistence. Cultural heritage protection preserves identity while fostering cross-community understanding.</p>
          </details>

          <div class="resources-block">
            <h3>Additional Resources & Materials</h3>
            <p>Video lectures and materials coming soon. Placeholder for embedded videos and downloadable materials.</p>
            <div class="resource-placeholder">
              <p>Video 1 placeholder</p>
            </div>
            <div class="resource-placeholder">
              <p>Video 2 placeholder</p>
            </div>
          </div>

          <div class="quiz-block" aria-labelledby="quiz-title-m4">
            <h3 id="quiz-title-m4">Quick Check</h3>
            <form id="quiz-m4" class="quiz" aria-describedby="quiz-desc-m4">
              <p id="quiz-desc-m4" class="muted">3 questions to reinforce core concepts.</p>

              <fieldset>
                <legend>1) Design for reconciliation focuses on…</legend>
                <label><input type="radio" name="q1m4" value="a"> punishment of perpetrators</label>
                <label><input type="radio" name="q1m4" value="b"> healing relationships and restoring dignity</label>
                <label><input type="radio" name="q1m4" value="c"> forgetting the past</label>
              </fieldset>

              <fieldset>
                <legend>2) Memorialization projects can support peace by…</legend>
                <label><input type="radio" name="q2m4" value="a"> glorifying violence</label>
                <label><input type="radio" name="q2m4" value="b"> honoring victims while pointing toward reconciliation and coexistence</label>
                <label><input type="radio" name="q2m4" value="c"> erasing historical memory</label>
              </fieldset>

              <fieldset>
                <legend>3) Bridging divides requires design that…</legend>
                <label><input type="radio" name="q3m4" value="a"> minimizes contact between groups</label>
                <label><input type="radio" name="q3m4" value="b"> creates genuine contact, challenges stereotypes, and builds relationships across difference</label>
                <label><input type="radio" name="q3m4" value="c"> ignores power imbalances</label>
              </fieldset>

              <div class="quiz-actions">
                <button type="button" id="check-quiz-m4" class="button-primary">Check answers</button>
                <button type="button" id="try-quiz-m4" class="button-secondary">Try again</button>
                <span id="quiz-result-m4" role="status" aria-live="polite"></span>
              </div>
            </form>
          </div>

          <div class="notes-block">
            <label for="notes-m4" class="notes-label">Reflection — How can design facilitate healing between communities in conflict?</label>
            <textarea id="notes-m4" class="notes" rows="4" placeholder="Your notes (autosaved)"></textarea>
          </div>

          <div class="module-actions module-actions-centered">
            <button class="button-quiet" data-prev="#m3">← Previous</button>
            <button class="button-primary" data-complete="m4">Mark section complete</button>
            <div class="pager pager-right">
              <button class="button-quiet" data-next="#m5">Next →</button>
            </div>
          </div>
        </section>

        <!-- 5. Communication Design, Ethics, and Impact Measurement -->
        <section id="m5" class="module-section" aria-labelledby="m5-title" hidden>
          <h2 id="m5-title">5. Communication Design, Ethics, and Impact Measurement</h2>
          <p class="lead">Designing for narrative change, ethical practice, and accountability.</p>

          <details class="concept concept-alt-0" open>
            <summary><strong>Communication Design for Peacebuilding</strong></summary>
            <p>Communication design uses visual communication, storytelling, media campaigns, and public messaging to shift narratives about conflict. Effective peace communication challenges stereotypes, promotes cultural sensitivity, humanizes "the other," and counters divisive narratives that fuel conflict.</p>
          </details>

          <details class="concept concept-alt-1">
            <summary><strong>Design Ethics and Responsible Innovation</strong></summary>
            <p>Peace innovations carry ethical weight. Responsible design requires considering: Who might be harmed? Who benefits and who is excluded? What unintended consequences might arise? Ethical frameworks grounded in human rights, do-no-harm principles, and inclusive design guide moral choices throughout the innovation process.</p>
          </details>

          <details class="concept concept-alt-0">
            <summary><strong>Design Evaluation and Impact Measurement</strong></summary>
            <p>Measuring design impact requires methodologies that capture both quantitative metrics (reduced violence, increased dialogue, economic gains) and qualitative indicators (trust, agency, dignity). Evaluation should be participatory—affected communities help define success and assess progress toward peace outcomes.</p>
          </details>

          <div class="resources-block">
            <h3>Additional Resources & Materials</h3>
            <p>Video lectures and materials coming soon. Placeholder for embedded videos and downloadable materials.</p>
            <div class="resource-placeholder">
              <p>Video 1 placeholder</p>
            </div>
            <div class="resource-placeholder">
              <p>Video 2 placeholder</p>
            </div>
          </div>

          <div class="quiz-block" aria-labelledby="quiz-title-final">
            <h3 id="quiz-title-final">Final Comprehensive Quiz</h3>
            <form id="quiz-final" class="quiz" aria-describedby="quiz-desc-final">
              <p id="quiz-desc-final" class="muted">6 questions evaluating concepts from the entire lesson.</p>

              <fieldset>
                <legend>1) Design thinking for peace emphasizes…</legend>
                <label><input type="radio" name="qf1" value="a"> expert-driven solutions</label>
                <label><input type="radio" name="qf1" value="b"> community leadership, iteration, and human-centered problem-solving</label>
                <label><input type="radio" name="qf1" value="c"> avoiding community input</label>
              </fieldset>

              <fieldset>
                <legend>2) Participatory design benefits peacebuilding by…</legend>
                <label><input type="radio" name="qf2" value="a"> slowing down implementation</label>
                <label><input type="radio" name="qf2" value="b"> creating legitimacy, ownership, and sustainability through community leadership</label>
                <label><input type="radio" name="qf2" value="c"> reducing cost</label>
              </fieldset>

              <fieldset>
                <legend>3) Sustainable peace design must address…</legend>
                <label><input type="radio" name="qf3" value="a"> only economic dimensions</label>
                <label><input type="radio" name="qf3" value="b"> environmental, economic, and social dimensions simultaneously</label>
                <label><input type="radio" name="qf3" value="c"> only security concerns</label>
              </fieldset>

              <fieldset>
                <legend>4) Reconciliation through design focuses on…</legend>
                <label><input type="radio" name="qf4" value="a"> ignoring historical harm</label>
                <label><input type="radio" name="qf4" value="b"> healing relationships, restoring dignity, and building shared futures</label>
                <label><input type="radio" name="qf4" value="c"> maintaining separation between groups</label>
              </fieldset>

              <fieldset>
                <legend>5) Communication design for peace should…</legend>
                <label><input type="radio" name="qf5" value="a"> amplify divisive narratives</label>
                <label><input type="radio" name="qf5" value="b"> challenge stereotypes and promote understanding across divides</label>
                <label><input type="radio" name="qf5" value="c"> avoid controversial topics</label>
              </fieldset>

              <fieldset>
                <legend>6) Measuring design impact requires…</legend>
                <label><input type="radio" name="qf6" value="a"> only counting violence statistics</label>
                <label><input type="radio" name="qf6" value="b"> participatory evaluation capturing both quantitative and qualitative peace indicators</label>
                <label><input type="radio" name="qf6" value="c"> external evaluators only</label>
              </fieldset>

              <div class="quiz-actions">
                <button type="button" id="check-quiz-final" class="button-primary">Check answers</button>
                <button type="button" id="try-quiz-final" class="button-secondary">Try again</button>
                <span id="quiz-result-final" role="status" aria-live="polite"></span>
              </div>
            </form>
          </div>

          <div class="notes-block">
            <label for="notes-m5" class="notes-label">Final Reflection — Choose one design approach from this lesson (design thinking, participatory design, communication design, etc.) and describe how you would apply it to a peace challenge in your community or a context you care about.</label>
            <textarea id="notes-m5" class="notes" rows="6" placeholder="Your final reflection (autosaved)"></textarea>
          </div>

          <div class="module-actions module-actions-centered">
            <button class="button-quiet" data-prev="#m4">← Previous</button>
            <button class="button-primary" data-complete="m5">Mark section complete</button>
          </div>

          <div class="restart-section">
            <button class="button-secondary" id="restart-lesson">↻ Restart Lesson</button>
          </div>
        </section>
      </article>

      <div class="lesson-footer">
        <a href="teaching.html" class="deep-link">← Back to Teaching</a>
      </div>

    </div>
  </section>
  </main>

  <footer>
    <div class="container footer">
      <p>&copy; 2026 Juan José Vásquez-Pacheco.</p>
      <a class="deep-link" href="teaching.html">← Back to Teaching →</a>
    </div>
  </footer>

  <style>
    .skip-link {
      position: absolute;
      left: -999px;
      top: -999px;
    }
    .skip-link:focus {
      left: 16px;
      top: 16px;
      background: var(--accent);
      color: var(--bg);
      padding: 10px 14px;
      border-radius: var(--radius);
    }

    .course-wrapper { max-width: 1000px; margin: 40px auto; }
    .course-header { display: flex; gap: 16px; align-items: center; justify-content: center; flex-wrap: wrap; padding: 20px 16px; background: var(--card); border-radius: 16px; margin: 0 16px; }
    .header-title { display: flex; gap: 12px; align-items: center; justify-content: center; }
    .title-group { text-align: center; }
    .course-header h1 { font-size: 28px; margin: 0 0 4px 0; }
    .subtitle-tagline { margin: 0; font-size: 14px; color: var(--muted); font-style: italic; }
    .home-btn { display: inline-flex; align-items: center; justify-content: center; width: 40px; height: 40px; border-radius: var(--radius); border: 1px solid var(--stroke); background: var(--card); color: var(--text); cursor: pointer; font-size: 16px; text-decoration: none; transition: background 0.2s; }
    .home-btn:hover { background: var(--accent-2); }

    .button-primary, .button-secondary, .button-danger, .button-quiet, .button-link {
      font: inherit;
      border-radius: var(--radius);
      padding: 10px 14px;
      cursor: pointer;
      border: 1px solid var(--stroke);
      background: var(--card);
      color: var(--text);
    }
    .button-primary { background: var(--accent); color: var(--bg); border-color: var(--accent); }
    .button-danger { background: #b00020; color: #fff; border-color: #b00020; }
    .button-quiet { background: transparent; }
    .button-link { background: transparent; text-decoration: underline; }

    .progress-block { margin: 12px 0 24px; }
    .progress-meta { margin-bottom: 8px; font-weight: 500; }
    .progress-bar { height: 10px; background: var(--stroke); border-radius: 999px; position: relative; }
    .progress-fill { display: block; height: 100%; background: var(--accent); border-radius: 999px; width: 0%; transition: width .2s ease; }

    .module-nav { display: grid; grid-template-columns: repeat(5, minmax(160px, 1fr)); gap: 8px; margin-bottom: 24px; }
    .module-link { padding: 10px; border-radius: var(--radius); border: 1px solid var(--stroke); background: var(--card); cursor: pointer; }
    .module-link[aria-current="true"] { background: var(--accent-2); color: var(--bg); }

    .lesson-content { max-width: 860px; margin: 0 auto; }
    .module-section { margin: 24px 0 40px; }
    .module-section h2 { font-size: 24px; margin-bottom: 8px; }
    .lead { color: var(--muted); margin-bottom: 16px; }
    .concept { border: 1px solid var(--stroke); border-radius: var(--radius); padding: 12px 16px; background: var(--card); margin-bottom: 10px; }
    .concept-alt-0 { background: #e8f0f9; border-color: #c5dff0; color: #1a3a52; }
    .concept-alt-1 { background: #d4e6f1; border-color: #a9cde4; color: #1a3a52; }
    .concept summary { cursor: pointer; font-weight: 600; }
    .concept-alt-0 summary, .concept-alt-1 summary { color: inherit; }

    .resources-block { margin: 20px 0; padding: 16px; background: var(--card); border: 1px solid var(--stroke); border-radius: var(--radius); }
    .resources-block h3 { margin: 0 0 12px 0; font-size: 18px; }
    .resource-placeholder { height: 200px; background: #f0f0f0; border: 2px dashed #ccc; border-radius: var(--radius); display: flex; align-items: center; justify-content: center; color: var(--muted); margin-bottom: 10px; }

    .quiz-block { margin-top: 12px; margin-bottom: 16px; border: 1px solid var(--stroke); border-radius: var(--radius); padding: 16px; background: var(--card); }
    .quiz fieldset { border: none; margin-bottom: 12px; }
    .quiz legend { font-weight: 600; margin-bottom: 6px; }
    .quiz label { display: block; margin: 4px 0; }
    .quiz-actions { display: flex; gap: 12px; align-items: center; }

    .notes-block { margin-top: 12px; }
    .notes-label { display: block; margin-bottom: 6px; font-weight: 600; }
    .notes { width: 100%; border: 1px solid var(--stroke); border-radius: var(--radius); padding: 10px; background: var(--bg); color: var(--text); }

    .pager { display: flex; gap: 8px; align-items: center; margin-top: 12px; }
    .pager-right { margin-left: auto; }
    .module-actions-centered { display: flex; gap: 12px; align-items: center; justify-content: space-between; margin-top: 24px; }

    @media (max-width: 800px) {
      .module-nav { grid-template-columns: 1fr 1fr; }
      .course-header h1 { font-size: 20px; }
      .header-title { flex-direction: column; }
      .module-actions-centered { flex-direction: column; align-items: stretch; }
      .pager-right { margin-left: 0; }
    }

    @media (prefers-reduced-motion: reduce) {
      .progress-fill { transition: none; }
    }
  </style>

  <script>
    (function() {
      const TOTAL = 5;
      const LS_PROGRESS = 'lesson2_progress';
      const LS_NOTES_PREFIX = 'lesson2_notes_';

      const $progressText = document.getElementById('progress-text');
      const $progressBar = document.querySelector('.progress-bar');
      const $progressFill = document.querySelector('.progress-fill');
      const $moduleLinks = Array.from(document.querySelectorAll('.module-link'));
      const $sections = Array.from(document.querySelectorAll('.module-section'));

      let progress = new Set(JSON.parse(localStorage.getItem(LS_PROGRESS) || '[]'));
      updateProgressUI();

      // Notes autosave
      document.querySelectorAll('.notes').forEach(n => {
        const key = LS_NOTES_PREFIX + n.id.replace('notes-', '');
        const saved = localStorage.getItem(key);
        if (saved) n.value = saved;
        n.addEventListener('input', () => localStorage.setItem(key, n.value));
      });

      // Module nav
      $moduleLinks.forEach(btn => btn.addEventListener('click', () => showSection(btn.dataset.target)));

      // Pager
      document.querySelectorAll('[data-next]')
        .forEach(b => b.addEventListener('click', () => showSection(b.dataset.next)));
      document.querySelectorAll('[data-prev]')
        .forEach(b => b.addEventListener('click', () => showSection(b.dataset.prev)));

      // Completion
      document.querySelectorAll('[data-complete]')
        .forEach(b => b.addEventListener('click', () => {
          const id = b.getAttribute('data-complete');
          progress.add(id);
          persistProgress();
          updateProgressUI();
          const nextBtn = b.closest('.module-actions').querySelector('[data-next]');
          if (nextBtn) showSection(nextBtn.dataset.next);
        }));

      // Quizzes
      const answerKeys = {
        m2: { q1m2: 'b', q2m2: 'b', q3m2: 'c' },
        m4: { q1m4: 'b', q2m4: 'b', q3m4: 'b' },
        final: { qf1: 'b', qf2: 'b', qf3: 'b', qf4: 'b', qf5: 'b', qf6: 'b' }
      };

      const bindQuiz = (checkId, formId, resultId, key) => {
        const checkBtn = document.getElementById(checkId);
        const form = document.getElementById(formId);
        const result = document.getElementById(resultId);
        if (!checkBtn || !form || !result) return;
        const names = Object.keys(key);

        checkBtn.addEventListener('click', () => {
          let correct = 0;
          names.forEach(name => {
            const checked = form.querySelector(`input[name="${name}"]:checked`);
            if (checked && checked.value === key[name]) correct++;
          });
          const total = names.length;
          const pct = Math.round((correct / total) * 100);
          const msg = pct >= 70 ? '✓ Great work!' : 'Review and try again.';
          result.textContent = `${correct}/${total} correct (${pct}%) ${msg}`;
        });
      };

      bindQuiz('check-quiz-m2', 'quiz-m2', 'quiz-result-m2', answerKeys.m2);
      bindQuiz('check-quiz-m4', 'quiz-m4', 'quiz-result-m4', answerKeys.m4);
      bindQuiz('check-quiz-final', 'quiz-final', 'quiz-result-final', answerKeys.final);

      const bindReset = (resetId, formId, resultId) => {
        const resetBtn = document.getElementById(resetId);
        const form = document.getElementById(formId);
        const result = document.getElementById(resultId);
        if (!resetBtn || !form || !result) return;
        resetBtn.addEventListener('click', () => {
          form.reset();
          result.textContent = '';
        });
      };

      bindReset('try-quiz-m2', 'quiz-m2', 'quiz-result-m2');
      bindReset('try-quiz-m4', 'quiz-m4', 'quiz-result-m4');
      bindReset('try-quiz-final', 'quiz-final', 'quiz-result-final');

      // Restart lesson
      const reset = document.getElementById('restart-lesson');
      if (reset) {
        reset.addEventListener('click', () => {
          const ok = confirm('Are you sure? This will reset all progress and notes.');
          if (!ok) return;
          localStorage.removeItem(LS_PROGRESS);
          for (let i = 1; i <= TOTAL; i++) localStorage.removeItem(LS_NOTES_PREFIX + 'm' + i);
          progress = new Set();
          document.querySelectorAll('.notes').forEach(n => n.value = '');
          document.querySelectorAll('input[type="radio"]').forEach(r => r.checked = false);
          document.querySelectorAll('#quiz-result-m2, #quiz-result-m4, #quiz-result-final').forEach(el => el.textContent = '');
          updateProgressUI();
          showSection('#m1');
          window.scrollTo({ top: 0, behavior: 'smooth' });
        });
      }

      // Show initial section
      showSection('#m1');

      function showSection(selector) {
        const target = selector.startsWith('#') ? selector : '#' + selector;
        $sections.forEach(sec => sec.hidden = ('#' + sec.id) !== target);
        $moduleLinks.forEach(b => b.setAttribute('aria-current', (b.dataset.target === target) ? 'true' : 'false'));
        const el = document.querySelector(target);
        if (el) el.scrollIntoView({ behavior: 'smooth', block: 'start' });
      }

      function updateProgressUI() {
        const completed = progress.size;
        $progressText.textContent = `${completed} / ${TOTAL} sections completed`;
        $progressBar.setAttribute('aria-valuenow', String(completed));
        const pct = Math.round((completed / TOTAL) * 100);
        $progressFill.style.width = pct + '%';
      }

      function persistProgress() {
        localStorage.setItem(LS_PROGRESS, JSON.stringify(Array.from(progress)));
      }
    })();
  </script>
</body>
</html>
